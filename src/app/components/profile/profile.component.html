<div class="perfil-container">
  <div class="perfil-card">
    <img
      [src]="usuario?.first_photo_url | defaultAdmin"
      alt="Foto de perfil" class="perfil-img" />

    <h3 class="text-center">{{ usuario?.role }}</h3>

    <!-- Toggle para cambiar entre secciones -->
    <div class="toggle-container" *ngIf="usuario?.role === 'Especialista'; else soloInfo">
      <button [class.active]="seccionActiva === 'info'" (click)="cambiarSeccion('info')">
        Información
      </button>
      <button [class.active]="seccionActiva === 'horarios'" (click)="cambiarSeccion('horarios')">
        Mis horarios
      </button>
    </div>

    <!-- Si no es especialista, solo muestra información -->
    <ng-template #soloInfo>
      <h4 class="text-center">Información</h4>
    </ng-template>

    <!-- Contenido de Información -->
    <div *ngIf="seccionActiva === 'info' || usuario?.role !== 'Especialista'" class="perfil-info">
      <p><strong>Nombre:</strong> {{ usuario?.first_name }}</p>
      <p><strong>Apellido:</strong> {{ usuario?.last_name }}</p>
      <p><strong>Email:</strong> {{ usuario?.email }}</p>
      <p><strong>Edad:</strong> {{ usuario?.age }}</p>
      <p><strong>DNI:</strong> {{ usuario?.dni }}</p>

      <p *ngIf="usuario?.role === 'Paciente'">
        <strong>Obra social:</strong> {{ usuario?.health_insurance }}
      </p>
    </div>
  </div>
</div>

<!-- Modal de configuración de horarios -->
<div class="modal" [class.show]="mostrarModal">
  <div class="modal-content">
    <button class="close" (click)="cerrarModal()">×</button>
    <h3 class="text-center">Configurar horarios</h3>

    <!-- Días -->
    <div class="dias-container">
      <h4>Días disponibles</h4>
      <button *ngFor="let dia of dias" (click)="seleccionarDia(dia)" [class.activo]="diasSeleccionados.includes(dia)">
        {{ dia }}
      </button>
    </div>

    <!-- Horas de inicio -->
    <div class="horas-container">
      <h4>Hora de inicio</h4>
      <button *ngFor="let hora of horasDisponibles" (click)="seleccionarHora(hora)"
        [class.activo]="horaSeleccionada === hora">
        {{ hora }}
      </button>
    </div>

    <!-- Cantidad de turnos -->
    <div class="horarios-form">
      <label for="cantidadTurnos"><strong>Cantidad de turnos por día:</strong></label>
      <input id="cantidadTurnos" type="number" min="1" (keypress)="soloNumeros($event)" [(ngModel)]="cantidadTurnos" placeholder="Ej: 5" />

      <button class="save" (click)="guardarHorarios()">Guardar horarios</button>
    </div>
  </div>
</div>